## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ —Ä–∞–∑–¥–µ–ª—É –ö–ö–¢/–û–§–î –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å:
- **–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–ª—É—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP¬ª** –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ (–≤–∫–ª–∞–¥–∫–∞ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã)
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel** (–∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–ª–∏–µ–Ω—Ç–æ–≤)

–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

---

–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
Support Portal ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (–∞–ø—Ç–µ–∫–∞–º–∏), –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏, —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –∫–∞—Å—Å–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–æ–π (–ö–ö–¢) —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –û–§–î.

–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Backend	Django 4.x + Django REST Framework	REST API, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
Frontend	React 18 + Ant Design	–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö	PostgreSQL 16	–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–í–µ–±-—Å–µ—Ä–≤–µ—Ä	Nginx (Alpine)	–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è	Docker + Docker Compose	–ò–∑–æ–ª—è—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
–°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞	Node.js 18 + npm	–ö–æ–º–ø–∏–ª—è—Ü–∏—è React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
üìã –ö–ª–∏–µ–Ω—Ç—ã

–ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞: –∞–¥—Ä–µ—Å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ), –∫–æ–º–ø–∞–Ω–∏—è, –ò–ù–ù, —Ç–µ–ª–µ—Ñ–æ–Ω, email, –∫–æ–¥ –∞–ø—Ç–µ–∫–∏, ICCID.

–¢—Ä–∏ –≤–∫–ª–∞–¥–∫–∏: üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, üåê –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã, üßæ –ö–ö–¢.

–ë–ª–æ–∫ –°–µ—Ç—å: –ø–æ–¥—Å–µ—Ç—å –∞–ø—Ç–µ–∫–∏, –≤–Ω–µ—à–Ω–∏–π IP, –ú–∏–∫—Ä–æ—Ç–∏–∫ IP (–∞–≤—Ç–æ: .1), –°–µ—Ä–≤–µ—Ä IP (–∞–≤—Ç–æ: .2), –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

–ü—Ä–æ–≤–∞–π–¥–µ—Ä 1 –∏ –ü—Ä–æ–≤–∞–π–¥–µ—Ä 2: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Å –∏–∫–æ–Ω–∫–∞–º–∏), —Ç–∞—Ä–∏—Ñ, –ª–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç, ‚Ññ –¥–æ–≥–æ–≤–æ—Ä–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.

–î–ª—è —Ç–∏–ø–æ–≤ ¬´–ú–æ–¥–µ–º¬ª –∏–ª–∏ ¬´MR-Net¬ª: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è ¬´–ù–æ–º–µ—Ä (–º–æ–¥–µ–º/SIM)¬ª –∏ ¬´ICCID –º–æ–¥–µ–º–∞¬ª.

–ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Å –≤—ã–±–æ—Ä–æ–º —Å–ª–æ—Ç–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP —Å –ú–∏–∫—Ä–æ—Ç–∏–∫–∞ –ø–æ SSH (paramiko).

–ó–∞–º–µ—Ç–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–¥–æ 5 –ú–ë): —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ.

–°–∏—Å—Ç–µ–º–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞.

–≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ Excel —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ Email.

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã.

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ).

üßæ –ö–ö–¢ (–ö–∞—Å—Å–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞)

–†–∞–∑–¥–µ–ª ¬´–ö–æ–º–ø–∞–Ω–∏–∏¬ª ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–ø–∞–Ω–∏–π —Å –ò–ù–ù –∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º –û–§–î (lk.ofd.ru).

–í –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–º–ø–∞–Ω–∏–∏.

–í–∫–ª–∞–¥–∫–∞ ¬´–ö–ö–¢¬ª ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å –û–§–î, —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∞–¥—Ä–µ—Å—É –∞–ø—Ç–µ–∫–∏.

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç ofd_fetch.sh, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –Ω–∞ —Ö–æ—Å—Ç–µ (–ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã).

üåê –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–µ–ª–µ—Ñ–æ–Ω—ã —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏, –ø–æ–∏—Å–∫.

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏

RBAC: —Ä–æ–ª–∏ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

–†–æ–ª–∏: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –°–≤—è–∑–∏—Å—Ç.

–ü–æ–ª–µ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –¥–µ–∂—É—Ä—Å—Ç–≤.

–†–æ–ª—å –°–≤—è–∑–∏—Å—Ç: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Ä–∞–∑–¥–µ–ª–∞–º ¬´–ö–ª–∏–µ–Ω—Ç—ã¬ª –∏ ¬´–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã¬ª, –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–∫—Ä—ã—Ç.

üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–µ–∂—É—Ä—Å—Ç–≤

–¢–∞–±–ª–∏—Ü–∞: —Å—Ç—Ä–æ–∫–∏ ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (–±–µ–∑ –°–≤—è–∑–∏—Å—Ç–æ–≤), —Å—Ç–æ–ª–±—Ü—ã ‚Äî –¥–Ω–∏ –º–µ—Å—è—Ü–∞.

–¢–∏–ø—ã –¥–µ–∂—É—Ä—Å—Ç–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π: –¢–µ–ª–µ—Ñ–æ–Ω (–∑–µ–ª—ë–Ω—ã–π), –†–∞–±–æ—Ç–∞ –¥–Ω—ë–º (—Å–∏–Ω–∏–π), –¢–µ–ª–µ—Ñ–æ–Ω+–¥–µ–Ω—å (–∑–µ–ª—ë–Ω—ã–π), –û—Ç–ø—É—Å–∫ (–∂—ë–ª—Ç—ã–π), –ó–∞–Ω—è—Ç (–∫—Ä–∞—Å–Ω—ã–π).

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –æ—Ä–∞–Ω–∂–µ–≤—ã–º.

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø–æ–º–µ—á–∞—Ç—å –¥–Ω–∏ –∫–∞–∫ –≤—ã—Ö–æ–¥–Ω—ã–µ/—Ä–∞–±–æ—á–∏–µ.

–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è —Ä–æ–∑–æ–≤–æ–π —Ä–∞–º–∫–æ–π —Å üéÇ.

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫—Ä—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

–ö–Ω–æ–ø–∫–∏ ¬´–û—Ç—á—ë—Ç –∑–∞ –º–µ—Å—è—Ü¬ª –∏ ¬´–û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É¬ª (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞).

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

SSH-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ú–∏–∫—Ä–æ—Ç–∏–∫–∞–º (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å —à–∏—Ñ—Ä—É–µ—Ç—Å—è).

SMTP-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Email (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å —à–∏—Ñ—Ä—É–µ—Ç—Å—è).

–¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞, –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–¢—ë–º–Ω–∞—è —Ç–µ–º–∞ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ).

–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—É–Ω–∫—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
Ubuntu 20.04 / 22.04 / 24.04

2 –ì–ë RAM –º–∏–Ω–∏–º—É–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 –ì–ë)

20 –ì–ë –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã: 80 (HTTP), 443 (HTTPS) ‚Äì –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
1.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
bash
apt update && apt upgrade -y
1.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose Plugin
bash
curl -fsSL https://get.docker.com | sh
apt install docker-compose-plugin -y
1.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
bash
apt install git -y
1.4 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3 –∏ pip
bash
apt install python3 python3-pip -y
1.5 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ cryptography (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è)
bash
pip3 install cryptography --break-system-packages
1.6 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js –∏ npm (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
bash
apt install nodejs npm -y
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π:

bash
node --version   # v18.x.x –∏–ª–∏ –≤—ã—à–µ
npm --version    # 9.x.x –∏–ª–∏ –≤—ã—à–µ
1.7 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
bash
apt install curl nano iputils-ping openssl -y
1.8 –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
bash
docker --version
docker compose version
git --version
python3 --version
node --version
npm --version
ping -c1 8.8.8.8
2. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
bash
git clone https://github.com/suminslava55-droid/support-portal-new.git /opt/support-portal
cd /opt/support-portal
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
bash
cp .env.example .env
nano .env
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª:

env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_NAME=support_portal
DB_USER=postgres
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DB_HOST=db
DB_PORT=5432

# Django
SECRET_KEY=CHANGE_ME_VERY_LONG_SECRET_KEY_HERE
DEBUG=False
ALLOWED_HOSTS=your-ip-or-domain,localhost
CORS_ALLOWED_ORIGINS=http://your-ip-or-domain,http://localhost

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è SSH, SMTP –∏ —Ç–æ–∫–µ–Ω–æ–≤ –û–§–î)
ENCRYPTION_KEY=CHANGE_ME_FERNET_KEY
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
SECRET_KEY:

bash
openssl rand -hex 50
ENCRYPTION_KEY (Fernet-–∫–ª—é—á):

bash
python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ALLOWED_HOSTS / CORS_ALLOWED_ORIGINS: —É–∫–∞–∂–∏—Ç–µ IP –∏–ª–∏ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

–ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ .env:

env
DB_NAME=support_portal
DB_USER=postgres
DB_PASSWORD=qX7!mN3kP9@support
DB_HOST=db
DB_PORT=5432

SECRET_KEY=a3f8c2d1e4b7a9f0c3d6e2b5a8f1c4d7e0b3a6f9c2d5e8b1a4f7c0d3e6b9a2f5c8d1e4b7
DEBUG=False
ALLOWED_HOSTS=94.130.1.1,localhost
CORS_ALLOWED_ORIGINS=http://94.130.1.1,http://localhost

ENCRYPTION_KEY=ySKoI9K2_Uj2qjNUSxREYTFIW3o-HILiIMYZ5enMgYs=
–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (Ctrl+O, Enter, Ctrl+X).

4. –•—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
bash
mkdir -p /opt/support-portal/media
–ü–∞–ø–∫–∞ –±—É–¥–µ—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

5. –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –û–§–î (–Ω–∞ —Ö–æ—Å—Ç–µ)
–°–∫—Ä–∏–ø—Ç ofd_fetch.sh –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç –û–§–î, —Ç–∞–∫ –∫–∞–∫ –∏–∑ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ (–µ—Å–ª–∏ –æ–Ω –µ—â—ë –Ω–µ —Ç–∞–º)
cp /opt/support-portal/ofd_fetch.sh /opt/support-portal/ofd_fetch.sh   # –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω —É–∂–µ –µ—Å—Ç—å

# –°–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x /opt/support-portal/ofd_fetch.sh
–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ –ø—É—Ç–∏ /opt/support-portal/ofd_fetch.sh –Ω–∞ —Ö–æ—Å—Ç–µ. –í docker-compose.yml –æ–Ω –±—É–¥–µ—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ /usr/local/bin/ofd_fetch.sh.

6. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ docker-compose.yml –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

Volume –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –û–§–î: - /opt/support-portal/ofd_fetch.sh:/usr/local/bin/ofd_fetch.sh:ro

–£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout –¥–ª—è gunicorn: --timeout 120 (–¥–ª—è –¥–æ–ª–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –û–§–î).

–ï—Å–ª–∏ —Ñ–∞–π–ª –µ—â—ë –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö (–æ–±—ã—á–Ω–æ –æ–Ω–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é).

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

bash
cd /opt/support-portal
docker compose up -d --build
–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5‚Äì10 –º–∏–Ω—É—Ç. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏:

bash
docker compose logs -f
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã:

bash
docker compose ps
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã: support-portal-db-1, support-portal-backend-1, support-portal-nginx-1.

7. –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ —Ä–æ–ª–µ–π
bash
docker compose exec backend python create_admin.py
–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:

–†–æ–ª–∏: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –°–≤—è–∑–∏—Å—Ç.

–ü–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∑–∞–ø—Ä–æ—Å–∏—Ç email, –ø–∞—Ä–æ–ª—å, –∏–º—è).

8. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ http://<IP-–≤–∞—à–µ–≥–æ-—Å–µ—Ä–≤–µ—Ä–∞>.

–í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ù–∞—Å—Ç—Ä–æ–π–∫–∏:

–£–∫–∞–∂–∏—Ç–µ SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ SSH –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ú–∏–∫—Ä–æ—Ç–∏–∫–∞–º.

–£–∫–∞–∂–∏—Ç–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–µ—Ä–≤–µ—Ä, –ø–æ—Ä—Ç, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –æ—Ç–ø—Ä–∞–≤–∫—É.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã ‚Üí –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ö–æ–º–ø–∞–Ω–∏–∏ (–¥–ª—è –û–§–î) ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é, —É–∫–∞–∑–∞–≤ –ò–ù–ù –∏ —Ç–æ–∫–µ–Ω –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –û–§–î.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è).

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

9. –†–∞–±–æ—Ç–∞ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
–ö–ª–∏–µ–Ω—Ç—ã
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ê–¥—Ä–µ—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ö–ö–¢).

–í –±–ª–æ–∫–µ –°–µ—Ç—å –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–¥—Å–µ—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è IP –º–∏–∫—Ä–æ—Ç–∏–∫–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ IP –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–ü–æ–ª—É—á–∏—Ç—å¬ª —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º ¬´–í–Ω–µ—à–Ω–∏–π IP¬ª (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SSH –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ç–∏–∫—É).

–í–æ –≤–∫–ª–∞–¥–∫–µ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–æ –¥–≤—É—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, —É–∫–∞–∑–∞—Ç—å —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —Ç–∞—Ä–∏—Ñ –∏ —Ç.–¥.

–î–ª—è –º–æ–¥–µ–º–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –ø–æ—è–≤—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –Ω–æ–º–µ—Ä–∞ SIM –∏ ICCID.

–ö–Ω–æ–ø–∫–∞ ¬´–ü–µ—Ä–µ–¥–∞—Ç—å¬ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥—Ä—É–≥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.

–í–æ –≤–∫–ª–∞–¥–∫–µ –§–∞–π–ª—ã –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.

–ö–ö–¢ (–û–§–î)
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–ª–∏–µ–Ω—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è (–∏–∑ —Ä–∞–∑–¥–µ–ª–∞ ¬´–ö–æ–º–ø–∞–Ω–∏–∏¬ª) –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω –∞–¥—Ä–µ—Å.

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É ¬´–ö–ö–¢¬ª.

–ù–∞–∂–º–∏—Ç–µ ¬´–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –û–§–î¬ª ‚Äì –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–¥—Ä–µ—Å—É –∫–ª–∏–µ–Ω—Ç–∞.

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ¬´–û–±–Ω–æ–≤–∏—Ç—å –ø–æ –†–ù–ú¬ª (–±—ã—Å—Ç—Ä–µ–µ, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞).

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–æ–¥–µ–ª–∏ KktData –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ.

–ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–µ–∂—É—Ä—Å—Ç–≤
–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—è–º–∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.

–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –≥–æ–¥.

–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —è—á–µ–π–∫—É, —á—Ç–æ–±—ã –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ç–∏–ø –¥–µ–∂—É—Ä—Å—Ç–≤–∞.

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –æ—Ç–º–µ—á–∞—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏ (–∫–Ω–æ–ø–∫–∞ ¬´–í—ã—Ö–æ–¥–Ω–æ–π¬ª –Ω–∞–¥ –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º).

–ö–Ω–æ–ø–∫–∞ ¬´–û—Ç—á—ë—Ç –∑–∞ –º–µ—Å—è—Ü¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É.

–ö–Ω–æ–ø–∫–∞ ¬´–û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É¬ª —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–µ–∂—É—Ä—Å—Ç–≤–∞ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).

–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏.

–†–æ–ª—å –°–≤—è–∑–∏—Å—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
SSH –∏ SMTP –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–∫–ª—é—á –∏–∑ .env).

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ENCRYPTION_KEY —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ —Å—Ç–∞–Ω—É—Ç –Ω–µ—á–∏—Ç–∞–µ–º—ã–º–∏ ‚Äì –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ –∏—Ö –∑–∞–Ω–æ–≤–æ.

10. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f backend
docker compose logs -f nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π Python-–∫–æ–¥–∞)
docker compose restart backend

# –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π JSX/CSS)
/opt/support-portal/deploy-frontend.sh

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ requirements.txt –∏–ª–∏ Dockerfile)
docker compose up -d --build

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec backend python manage.py migrate

# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–µ–π)
docker compose exec backend python manage.py makemigrations

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
docker compose exec db pg_dump -U postgres support_portal > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
cat backup_20240101.sql | docker compose exec -T db psql -U postgres support_portal

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è cryptography –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker compose exec backend python -c "from cryptography.fernet import Fernet; print('OK')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∞ –û–§–î –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker compose exec backend ls -la /usr/local/bin/ofd_fetch.sh

# –¢–µ—Å—Ç —Å–∫—Ä–∏–ø—Ç–∞ –û–§–î —Å —Ö–æ—Å—Ç–∞ (–Ω–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞!)
# ‚ö†Ô∏è –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å —Ö–æ—Å—Ç–∞, –ù–ï —á–µ—Ä–µ–∑ docker compose exec ‚Äî –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É!
python3 /opt/support-portal/ofd_fetch.sh <–ò–ù–ù> <–¢–û–ö–ï–ù> ["–∞–¥—Ä–µ—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏"]

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã)
docker compose exec backend python manage.py shell -c "
from apps.clients.models import OfdCompany
for c in OfdCompany.objects.all():
    print(c.id, c.name, '—Ç–æ–∫–µ–Ω:', c.ofd_token[:15] if c.ofd_token else '–ù–ï–¢')
"

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
docker compose exec backend python manage.py shell -c "
from apps.clients.models import Provider
providers = [('–†–æ—Å—Ç–µ–ª–µ–∫–æ–º','8-800-100-08-00'),('–ú–¢–°','8-800-250-08-90')]
for name, phone in providers:
    p, created = Provider.objects.get_or_create(name=name, defaults={'support_phones': phone})
    print('–°–æ–∑–¥–∞–Ω' if created else '–£–∂–µ –µ—Å—Ç—å', name)
"
11. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
bash
cd /opt/support-portal
git pull

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏, –µ—Å–ª–∏ –µ—Å—Ç—å
docker compose exec backend python manage.py migrate

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥
docker compose restart backend

# –ï—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
/opt/support-portal/deploy-frontend.sh

# –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Äì –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker compose up -d --build
12. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
–ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ / –æ—à–∏–±–∫–∏ JS

docker compose logs nginx --tail=30

–ñ—ë—Å—Ç–∫–∏–π —Å–±—Ä–æ—Å –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞: Ctrl+Shift+R

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.

–û—à–∏–±–∫–∞ 500 –æ—Ç API

bash
docker compose logs backend --tail=50
–û—à–∏–±–∫–∞ ¬´No module named 'cryptography'¬ª –∏–ª–∏ ¬´'paramiko'¬ª

–ü–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –ø—Ä–∏ —Å–±–æ—Ä–∫–µ. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:

bash
docker compose exec backend pip install cryptography paramiko --break-system-packages
docker compose restart backend

‚ö†Ô∏è –í–∞–∂–Ω–æ –ø—Ä–æ cryptography: –¥–∞–∂–µ –µ—Å–ª–∏ –ø–∞–∫–µ—Ç –µ—Å—Ç—å –≤ requirements.txt, –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (docker compose up --build) –æ–Ω –º–æ–∂–µ—Ç –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –∫–æ–º–∞–Ω–¥–æ–π –≤—ã—à–µ. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ:

bash
docker compose exec backend python -c "from cryptography.fernet import Fernet; print('OK')"

–°–∫—Ä–∏–ø—Ç –û–§–î –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ —Ö–æ—Å—Ç–µ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:

bash
ls -la /opt/support-portal/ofd_fetch.sh
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ docker-compose.yml –µ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π volume.

–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–≥—Ä–∞—Ü–∏–π (Conflicting migrations detected)

–°–æ–∑–¥–∞–π—Ç–µ merge-–º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é. –ü—Ä–∏–º–µ—Ä –¥–ª—è accounts:

bash
cat > /opt/support-portal/backend/apps/accounts/migrations/0004_merge.py << 'MIGRATION'
from django.db import migrations
class Migration(migrations.Migration):
    dependencies = [
        ('accounts', '0002_user_birthday'),
        ('accounts', '0003_update_role_choices'),
    ]
    operations = []
MIGRATION
docker compose exec backend python manage.py migrate
DEBUG –≤–∫–ª—é—á—ë–Ω —Å–ª—É—á–∞–π–Ω–æ

–ï—Å–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á–∞–ª–∏ DEBUG=True –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ:

bash
# –ù–∞–π—Ç–∏ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env
grep -r "DEBUG" /opt/support-portal --include="*.env*"
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEBUG=False –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose restart backend

–ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –±–∞–∑–µ

–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ —Å—Ç–∞—Ä—à–µ 1 –¥–Ω—è:

bash
docker compose exec backend python manage.py shell -c "
from apps.clients.models import Client
from django.utils import timezone
from datetime import timedelta
old = Client.objects.filter(is_draft=True, created_at__lt=timezone.now()-timedelta(days=1))
print(f'–ù–∞–π–¥–µ–Ω–æ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: {old.count()}')
for c in old:
    for f in c.files.all(): f.file.delete(); f.delete()
    c.delete()
print('–ì–æ—Ç–æ–≤–æ')
"
–ü–æ—Å–ª–µ —Å–º–µ–Ω—ã ENCRYPTION_KEY –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —á–∏—Ç–∞—Ç—å—Å—è –ø–∞—Ä–æ–ª–∏

–í–≤–µ–¥–∏—Ç–µ SSH –∏ SMTP –ø–∞—Ä–æ–ª–∏ –∑–∞–Ω–æ–≤–æ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª.

13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–§–∞–π–ª .env –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ git. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .gitignore:

text
.env
media/
*.pyc
__pycache__/
–ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ .env:

bash
openssl rand -hex 50               # –Ω–æ–≤—ã–π SECRET_KEY
python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"  # –Ω–æ–≤—ã–π ENCRYPTION_KEY
docker compose restart backend
–†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–∞–ø–∫–∏ media/.

14. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ–º–µ–Ω–∞)
bash
apt install certbot python3-certbot-nginx -y
docker compose stop nginx
certbot certonly --standalone -d –≤–∞—à-–¥–æ–º–µ–Ω.ru
–û–±–Ω–æ–≤–∏—Ç–µ nginx/default.conf, –¥–æ–±–∞–≤–∏–≤ –±–ª–æ–∫ server –¥–ª—è 443 —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–µ–π –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx:

bash
docker compose start nginx
–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ cron –∏–ª–∏ systemd timer.

15. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
support-portal/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accounts/             # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–æ–ª–∏, JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py         # User (+ –ø–æ–ª–µ birthday), Role
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ serializers.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ clients/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models.py         # Client, Provider, ClientFile, SystemSettings,
‚îÇ   ‚îÇ       ‚îÇ                     # DutySchedule, CustomHoliday, OfdCompany, KktData
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ views.py          # API, SSH, Excel, –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –ö–ö–¢
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ serializers.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ settings_views.py # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SSH –∏ SMTP
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ urls.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ create_admin.py
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientsPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientDetailPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientFormPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UsersPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProvidersPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OfdCompaniesPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AppLayout.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authStore.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ themeStore.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/index.js
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îî‚îÄ‚îÄ default.conf
‚îú‚îÄ‚îÄ media/                         # –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã (bind mount)
‚îú‚îÄ‚îÄ ofd_fetch.sh                   # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –û–§–î (–Ω–∞ —Ö–æ—Å—Ç–µ)
‚îú‚îÄ‚îÄ deploy-frontend.sh
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env                           # –ù–µ –≤ git!
‚îî‚îÄ‚îÄ .env.example
16. Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)
–ü–∞–∫–µ—Ç	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
django	–û—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
djangorestframework	REST API
djangorestframework-simplejwt	JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
psycopg2-binary	–î—Ä–∞–π–≤–µ—Ä PostgreSQL
django-cors-headers	CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
django-filter	–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ API
python-dotenv	–ó–∞–≥—Ä—É–∑–∫–∞ .env
cryptography	–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (SSH, SMTP, —Ç–æ–∫–µ–Ω—ã –û–§–î)
paramiko	SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ú–∏–∫—Ä–æ—Ç–∏–∫—É
openpyxl	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel —Ñ–∞–π–ª–æ–≤
gunicorn	WSGI-—Å–µ—Ä–≤–µ—Ä
Pillow	–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
